<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Gerenciador de Alunos</title>
</head>
<body>
  <h1 class="titulo_Principal">Gerenciador de Alunos</h1>

  <div id="formCadastro" class="container">
    <div id="adicionar">
      <label for="nome">Nome:</label>
      <input type="text" id="nome"><br><br>

      <label for="id">ID:</label>
      <input type="number" id="id"><br><br>

      <label for="email">Email:</label>
      <input type="text" id="email"><br><br>
    </div>

    <div class="container-botoes">
      <button type="button" id="btnAdicionar" class="btn-adicionar" onclick="adicionar()">Adicionar</button>
      <button type="button" id="btnAtualizar" class="btn-atualizar" onclick="atualizar()" style="display:none;">Atualizar</button> 
      <button type="button" class="btn-consultar" onclick="mostrarConsulta()">Consultar</button>
      <button type="button" class="btn-listar" onclick="listar()">Listar</button>
    </div>

    <div id="consultaDiv" style="display:none; margin-top:10px;">
      <label for="consulta">Digite o nome ou ID do aluno:</label>
      <input type="text" id="consulta" placeholder="Nome ou ID do aluno">
      <button type="button" class="btn-buscar" onclick="consultar()">Buscar</button>
    </div>

    <div id="info"></div>
  </div>

<script>
  let alunos = [];
  let editandoId = null; 

  function adicionar(){
    const nome = document.getElementById("nome").value;
    const id = Number(document.getElementById("id").value);
    const email = document.getElementById("email").value;

    if (nome.trim() === "" || isNaN(id) || email.trim() === "") {
      alert("Preencha todos os campos corretamente!");
    } else {
      if (alunos.some(aluno => aluno.id === id)) {
        alert("Já existe um aluno com esse ID!");
        return;
      }

      alunos.push({ nome, id, email });

      document.getElementById("info").innerHTML =
        "Aluno <b>" + nome + "</b> adicionado!";

      limparCampos();
      listar();
    }
  }

  function listar() {
    let texto_lista = "<h3>Lista de alunos</h3><ul>";

    alunos.forEach(aluno => {
      texto_lista += `
        <li>
          ID ${aluno.id} - ${aluno.nome} (${aluno.email})
          <button type="button" class="btn-editar" onclick="editar(${aluno.id})">Editar</button>
          <button type="button" class="btn-excluir" onclick="excluir(${aluno.id})">Excluir</button>
        </li>`;
    });

    texto_lista += "</ul>";

    document.getElementById("info").innerHTML =
      "<h4> O total de alunos é: " + alunos.length + "</h4>" +
      texto_lista ;
  }

  function excluir(id) {
    if (confirm("Tem certeza que deseja excluir este aluno?")) {
      alunos = alunos.filter(aluno => aluno.id !== id);
      listar();
    }
  }

  function editar(id) {
    const aluno = alunos.find(a => a.id === id);
    if (aluno) {
      document.getElementById("id").value = aluno.id;
      document.getElementById("nome").value = aluno.nome;
      document.getElementById("email").value = aluno.email;

      editandoId = id; 
      document.getElementById("id").disabled = true; 
      document.getElementById("btnAdicionar").style.display = "none";
      document.getElementById("btnAtualizar").style.display = "inline-block";
    }
  }

  function atualizar() {
    const nome = document.getElementById("nome").value;
    const email = document.getElementById("email").value;

    if (nome.trim() === "" || email.trim() === "") {
      alert("Preencha todos os campos corretamente!");
      return;
    }

    const aluno = alunos.find(a => a.id === editandoId);
    if (aluno) {
      aluno.nome = nome;
      aluno.email = email;
    }

    document.getElementById("info").innerHTML =
      "Aluno <b>" + nome + "</b> atualizado!";
    
    limparCampos();
    listar();

    editandoId = null;
    document.getElementById("id").disabled = false;
    document.getElementById("btnAdicionar").style.display = "inline-block";
    document.getElementById("btnAtualizar").style.display = "none";
  }

  function consultar() {
    const valor = document.getElementById("consulta").value.trim();
    let encontrado;

    if (valor === "") {
      alert("Digite um nome ou ID para consultar!");
      return;
    }

    if (!isNaN(valor)) {
      const idConsulta = Number(valor);
      encontrado = alunos.find(aluno => aluno.id === idConsulta);
    } else {
      encontrado = alunos.find(aluno => aluno.nome.toLowerCase() === valor.toLowerCase());
    }

    if (encontrado) {
      document.getElementById("info").innerHTML =
        `<h4>Aluno encontrado:</h4>
         ID: ${encontrado.id} <br>
         Nome: ${encontrado.nome} <br>
         Email: ${encontrado.email}`;
    } else {
      document.getElementById("info").innerHTML = "<p>Aluno não encontrado!</p>";
    }

    document.getElementById("consulta").value = "";
  }

  function mostrarConsulta() {
    const div = document.getElementById("consultaDiv");
    div.style.display = div.style.display === "none" ? "block" : "none";
  }

  function limparCampos(){
    document.getElementById("nome").value = "";
    document.getElementById("id").value = "";
    document.getElementById("email").value = "";
  }
</script>
</body>
</html>
